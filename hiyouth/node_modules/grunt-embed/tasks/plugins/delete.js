/**
 * Created with JetBrains PhpStorm.
 * User: dreamzhu
 * Date: 15-1-4
 * Time: 下午5:19
 * To change this template use File | Settings | File Templates.
 */

module.exports.run = function( _grunt, api, param ) {
	grunt = _grunt;
	var node = api.getNextValidNode();
	var node_param = api.getNodeParam( node );
	var gramma = api.getGrammar();
	if(node_param){
		if(gramma == 'html'){
			if(node_param.nodeType.toLowerCase() == 'script'){
				if(node_param.orginParams.src){
					var file = api.getTargetPath(node_param.orginParams.src);
					grunt.file.delete(file);
				} else {
					api.log(node_param.nodeType+'标签中缺少src');
				}
			} else if(node_param.nodeType.toLowerCase() == 'link'){
				if(node_param.orginParams.href){
					var file = api.getTargetPath(node_param.orginParams.href);
					grunt.file.delete(file);
				} else {
					api.log(node_param.nodeType+'标签中缺少href');
				}
			} else {
				api.log('暂不支持标签：'+node.content);
			}
		}
	}
}
